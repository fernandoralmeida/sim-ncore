@page
@model Sim.UI.Web.Pages.BancoPovo.IndexModel
@{
    ViewData["Title"] = "Banco do Povo";
    ViewData["ActivePageBPP"] = Web.Pages.BancoPovo.NavPage.Inicio;
}
<partial name="_NavPage" />
<div class="card">
    <div class="card-header grey-text">Meus Contratos<i class="material-icons left">text_snippet</i></div>
        @if(Model.MeusContratos != null) {
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Processo</th>
                        <th>Cliente</th>
                        <th>Data</th>
                        <th>Situação</th>
                        <th>Valor</th>
                        <th>CMD</th>
                    </tr>
                </thead>
                <tbody>     
                    @{ var _cont = 0; }
                    @foreach (var c in Model.MeusContratos) {
                        _cont++;
                        <tr>
                            <td>@_cont</td>
                            <td>@Html.DisplayFor(model => c.Numero)</td>
                            <td>
                                @{ 
                                    var _isempresa = c.Empresa != null ? c.Empresa.Nome_Empresarial : c.Cliente.Nome;
                                }
                                @Html.DisplayFor(modelc => _isempresa)
                            </td>
                            <td>@Html.DisplayFor(model => c.Data)</td>
                            <td class="align-wrapper">
                                @{ var _situacao = c.Situacao.ToString();}           
                                
                                    <select asp-for="InputContrato.Situacao" class="left" asp-items="Model.ESituacoes"></select>
                                    <button class="btn-small red waves-effect waves-light" type="submit" asp-page-handler="GoSituacao"><i class="material-icons">check_circle</i></button>
                                
                            </td>
                            <td>@Html.DisplayFor(model => c.Valor)</td>
                            <td><a class="btn-small waves-effect waves-light orange" asp-page="./Edit/Index" asp-route-id="@c.Id"><i class="material-icons">edit_document</i></a></td>
                        </tr>                        
                    }       
                </tbody>
            </table>
        }
    <div class="card-action">
        Lista de contratos iniciados para liberação de crédito
    </div>
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal">
    <div class="modal-content">
        <form method="post">
            <div class="row">
                <div class="col s12 m6 l3 input-field">
                    <select asp-for="InputContrato.Situacao" asp-items="Model.ESituacoes">
                    </select>  
                    <label asp-for="InputContrato.Situacao" ></label>
                    <button class="btn-small red lighten-1 waves-effect waves-light" type="submit" asp-page-handler="GoSituacao"><i class="material-icons">check_circle</i></button>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
</div>