@page
@model Sim.UI.Web.Pages.Triagem.IndexModel

@using Microsoft.AspNetCore.Identity
@using Sim.Identity.Entity

@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Painel de Informações dos Atendentes";
}

<partial name="_StatusMessage" model="Model.StatusMessage" />

<div class="row">    
    <div class="col s6 m3 l3">
        <ul class="collection with-header">
            <li class="collection-header"><h6>PAT</h6></li>
            @foreach(var luser in Model.ListaPAT)
            {
                if(luser.Status == "Em Atendimento")
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Em Atendimento"><i class="material-icons orange-text">do_not_disturb_on</i></a></div></li>
                }
                else
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Disponível"><i class="material-icons green-text">check_circle</i></a></div></li>
                }
            }
        </ul>
    </div>
    
    <div class="col s6 m3 l3">
        <ul class="collection with-header">
            <li class="collection-header"><h6>Banco do Povo</h6></li>
            @foreach(var luser in Model.ListaBPP)
            {
                if(luser.Status == "Em Atendimento")
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Em Atendimento"><i class="material-icons orange-text">do_not_disturb_on</i></a></div></li>
                }
                else
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Disponível"><i class="material-icons green-text">check_circle</i></a></div></li>
                }
            }
        </ul>
    </div>
    
    <div class="col s6 m3 l3">
        <ul class="collection with-header">
            <li class="collection-header"><h6>Sebrae Aqui</h6></li>
            @foreach(var luser in Model.ListaSA)
            {
                if(luser.Status == "Em Atendimento")
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Em Atendimento"><i class="material-icons orange-text">do_not_disturb_on</i></a></div></li>
                }
                else
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Disponível"><i class="material-icons green-text">check_circle</i></a></div></li>
                }
            }
        </ul>
    </div>
    
    <div class="col s6 m3 l3">
        <ul class="collection with-header">
            <li class="collection-header"><h6>Ambulantes</h6></li>
            @foreach(var luser in Model.ListaSE)
            {
                if(luser.Status == "Em Atendimento")
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Em Atendimento"><i class="material-icons orange-text">do_not_disturb_on</i></a></div></li>
                }
                else
                {
                    <li class="collection-item"><div>@luser.Atendente<a class="secondary-content" href="#" title="Disponível"><i class="material-icons green-text">check_circle</i></a></div></li>
                }
            }
        </ul>
    </div>

</div>

@section scripts
{
    <script language="javascript">
        setInterval(function () {
            window.location.reload(1);
        }, 30000);
    </script>
}
